<!-- app/views/devise/registrations/new.html.erb -->
<div class="flex min-h-[95vh] items-center justify-center px-4 py-10">
  <div class="w-full max-w-7xl">
    <div class="overflow-hidden rounded-3xl bg-white/95 shadow-2xl ring-1 ring-slate-200 grid md:grid-cols-[1fr_1fr] min-h-[75vh]">

      <!-- PANEL GAUCHE -->
      <div class="relative bg-gradient-to-br from-indigo-600 via-indigo-500 to-fuchsia-500 text-white px-10 py-14 flex flex-col justify-between">
        <div class="space-y-10">
          <div>
            <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1.5 text-[12px] font-medium backdrop-blur-sm shadow-sm">
              <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
              <span>Cr√©er un compte mes2vis</span>
            </div>
          </div>

          <div class="flex items-center gap-3">
            <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-white/90 text-xl font-semibold text-indigo-700 shadow">
              m2
            </div>
            <div>
              <p class="text-sm font-semibold text-indigo-100 tracking-wide">mes2vis</p>
              <p class="text-xs text-indigo-100/80">Votre assistant facturation</p>
            </div>
          </div>

          <div class="space-y-4">
            <h1 class="text-3xl font-semibold tracking-tight leading-tight">
              Inscris-toi et commence √† cr√©er tes factures en quelques secondes
            </h1>
            <p class="text-sm text-indigo-100/90 leading-relaxed max-w-md">
              Une plateforme moderne, simple et puissante pour g√©rer tes clients,
              tes paiements et automatiser ta comptabilit√©.
            </p>
          </div>

          <div class="space-y-3 text-sm text-indigo-100/90">
            <div class="flex items-start gap-3">
              <span class="mt-[3px] inline-flex h-4 w-4 items-center justify-center rounded-full bg-emerald-300/90 text-[10px] font-bold text-emerald-900">‚úì</span>
              <p>Cr√©ation de facture intuitive et personnalis√©e.</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="mt-[3px] inline-flex h-4 w-4 items-center justify-center rounded-full bg-emerald-300/90 text-[10px] font-bold text-emerald-900">‚úì</span>
              <p>Gestion compl√®te des statuts : pay√©e, en attente, en retard.</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="mt-[3px] inline-flex h-4 w-4 items-center justify-center rounded-full bg-emerald-300/90 text-[10px] font-bold text-emerald-900">‚úì</span>
              <p>Interface premium pens√©e pour les professionnels.</p>
            </div>
          </div>
        </div>

        <p class="mt-10 text-[11px] text-indigo-100/60">
          ¬© <%= Time.current.year %> mes2vis ‚Äî Tous droits r√©serv√©s
        </p>
      </div>

      <!-- PANEL DROIT -->
      <div class="relative px-14 py-14 bg-white flex flex-col justify-start">
        <div class="mb-6 flex justify-center">
          <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-indigo-600 to-fuchsia-500 text-lg font-semibold text-white shadow">
            m2
          </div>
        </div>

        <div class="mb-10 text-center">
          <p class="text-2xl font-bold tracking-tight text-slate-900">Cr√©er un compte</p>
          <p class="mt-2 text-sm text-slate-500 max-w-sm mx-auto">
            Configure ton espace professionnel mes2vis en moins d‚Äôune minute.
          </p>
        </div>

        <!-- ‚úÖ FLASH (vert = notice, rouge = alert) -->
        <% if notice.present? %>
          <div class="mb-6 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800">
            ‚úÖ <%= notice %>
          </div>
        <% end %>

        <% if alert.present? %>
          <div class="mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800">
            ‚ö†Ô∏è <%= alert %>
          </div>
        <% end %>

        <%= render "devise/shared/error_messages", resource: resource %>

        <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>

          <!-- Email -->
          <div class="mb-6">
            <%= f.label :email, "Adresse email",
                class: "block text-xs font-medium uppercase tracking-wide text-slate-600" %>

            <div class="mt-2 relative">
              <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400 text-sm">üìß</span>
              <%= f.email_field :email,
                    autofocus: true,
                    autocomplete: "email",
                    placeholder: "toi@exemple.com",
                    class: "w-full rounded-xl border border-slate-300 bg-white pl-9 pr-3 py-3 text-sm text-slate-900 placeholder-slate-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" %>
            </div>
          </div>

          <div data-controller="password">
            <!-- Password -->
            <div class="mb-6">
              <%= f.label :password, "Mot de passe",
                  class: "block text-xs font-medium uppercase tracking-wide text-slate-600" %>

              <p class="mt-2 text-[11px] text-slate-500 leading-relaxed">
                Le mot de passe doit contenir :
                <br>‚Ä¢ au moins 8 caract√®res
                <br>‚Ä¢ une majuscule et une minuscule
                <br>‚Ä¢ un chiffre
                <br>‚Ä¢ un caract√®re sp√©cial (!@#$‚Ä¶)
              </p>

              <div class="mt-2 relative">
                <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400 text-sm">üîí</span>

                <%= f.password_field :password,
                      autocomplete: "new-password",
                      placeholder: "Mot de passe",
                      data: { password_target: "password", action: "input->password#validate" },
                      class: "w-full rounded-xl border border-slate-300 bg-white pl-9 pr-16 py-3 text-sm shadow-sm placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" %>

                <button
                  type="button"
                  data-action="click->password#togglePassword"
                  data-password-target="togglePassword"
                  aria-label="Afficher le mot de passe"
                  class="absolute inset-y-0 right-3 z-50 flex items-center justify-center">
                  <span class="h-9 w-9 rounded-lg flex items-center justify-center text-slate-400 hover:text-indigo-600 hover:bg-slate-100">
                    <svg data-password-target="eyeOpen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-5 w-5">
                      <path d="M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>

                    <svg data-password-target="eyeOff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-5 w-5 hidden">
                      <path d="M3 3l18 18"/>
                      <path d="M10.6 10.6a3 3 0 0 0 4.2 4.2"/>
                      <path d="M9.4 5.1A10.3 10.3 0 0 1 12 5c6 0 9.5 7 9.5 7"/>
                      <path d="M6.6 6.6C3.6 8.8 2.5 12 2.5 12S6 19 12 19"/>
                    </svg>
                  </span>
                </button>
              </div>
            </div>

            <!-- Confirmation -->
            <div class="mb-8">
              <%= f.label :password_confirmation, "Confirmer le mot de passe",
                  class: "block text-xs font-medium uppercase tracking-wide text-slate-600" %>

              <div class="mt-2 relative">
                <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center text-slate-400 text-sm">üîí</span>

                <%= f.password_field :password_confirmation,
                      autocomplete: "new-password",
                      placeholder: "Confirmer le mot de passe",
                      data: { password_target: "confirmation", action: "input->password#validate" },
                      class: "w-full rounded-xl border border-slate-300 bg-white pl-9 pr-16 py-3 text-sm shadow-sm placeholder-slate-400 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" %>

                <button
                  type="button"
                  data-action="click->password#toggleConfirmation"
                  data-password-target="toggleConfirmation"
                  aria-label="Afficher le mot de passe"
                  class="absolute inset-y-0 right-3 z-50 flex items-center justify-center">
                  <span class="h-9 w-9 rounded-lg flex items-center justify-center text-slate-400 hover:text-indigo-600 hover:bg-slate-100">
                    <svg data-password-target="eyeOpenConfirmation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-5 w-5">
                      <path d="M2.5 12s3.5-7 9.5-7 9.5 7 9.5 7-3.5 7-9.5 7-9.5-7-9.5-7z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>

                    <svg data-password-target="eyeOffConfirmation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="h-5 w-5 hidden">
                      <path d="M3 3l18 18"/>
                      <path d="M10.6 10.6a3 3 0 0 0 4.2 4.2"/>
                      <path d="M9.4 5.1A10.3 10.3 0 0 1 12 5c6 0 9.5 7 9.5 7"/>
                      <path d="M6.6 6.6C3.6 8.8 2.5 12 2.5 12S6 19 12 19"/>
                    </svg>
                  </span>
                </button>
              </div>

              <p class="mt-2 text-xs hidden" data-password-target="confirmMessage"></p>
            </div>
          </div>

          <div>
            <%= f.submit "Cr√©er mon compte",
                data: { password_target: "submit" },
                class: "w-full cursor-pointer rounded-xl bg-indigo-600 px-4 py-3 text-sm font-medium text-white shadow-lg hover:bg-indigo-700 active:scale-[0.98] transition" %>
          </div>

        <% end %>

        <p class="mt-6 text-center text-xs text-slate-500">
          D√©j√† un compte ?
          <%= link_to "Se connecter",
              new_session_path(resource_name),
              class: "font-medium text-indigo-600 hover:text-indigo-700" %>
        </p>
      </div>

    </div>
  </div>
</div>
